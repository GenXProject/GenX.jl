<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hydro Reservoir · GenX</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://genxproject.github.io/GenX/stable/hydro_res/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GenX</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Welcome Page</span><ul><li><a class="tocitem" href="../">GenX: Introduction</a></li><li><a class="tocitem" href="../how_to_run_genx/">Running GenX Cases</a></li><li><a class="tocitem" href="../multi_stage_genx/">Multi-Stage Capacity Expansion Planning with GenX</a></li><li><a class="tocitem" href="../limitations_genx/">Limitation of GenX</a></li><li><a class="tocitem" href="../third_party_genx/">Third Party Extensions</a></li></ul></li><li><span class="tocitem">Model Concept and Overview</span><ul><li><a class="tocitem" href="../model_introduction/">Model Introduction</a></li><li><a class="tocitem" href="../model_notation/">Notation</a></li><li><a class="tocitem" href="../objective_function/">Objective Function</a></li><li><a class="tocitem" href="../power_balance/">Power Balance</a></li></ul></li><li><span class="tocitem">Model Function Reference</span><ul><li><a class="tocitem" href="../core/">Core</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><input class="collapse-toggle" id="menuitem-3-2-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2-3"><span class="docs-label">Hydro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Hydro Reservoir</a></li><li><a class="tocitem" href="../hydro_inter_period_linkage/">Long Duration Hydro</a></li></ul></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li><input class="collapse-toggle" id="menuitem-3-2-5" type="checkbox"/><label class="tocitem" for="menuitem-3-2-5"><span class="docs-label">Storage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../storage/">Storage</a></li><li><a class="tocitem" href="../investment_charge/">Investment Charge</a></li><li><a class="tocitem" href="../investment_energy/">Investment Energy</a></li><li><a class="tocitem" href="../long_duration_storage/">Long Duration Storage</a></li><li><a class="tocitem" href="../storage_all/">Storage All</a></li><li><a class="tocitem" href="../storage_asymmetric/">Storage Asymmetric</a></li><li><a class="tocitem" href="../storage_symmetric/">Storage Symmetric</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-6" type="checkbox"/><label class="tocitem" for="menuitem-3-2-6"><span class="docs-label">Thermal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Multi_stage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../multi_stage_model_overview/">Overview</a></li><li><input class="collapse-toggle" id="menuitem-3-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-3-2"><span class="docs-label">Load inputs for multi-stage modeling</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../configure_multi_stage_inputs/">Configure multi-stage inputs</a></li><li><a class="tocitem" href="../load_generators_data_multi_stage/">Load generators data</a></li><li><a class="tocitem" href="../load_network_data_multi_stage/">Load network data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3-3"><span class="docs-label">Model multi stage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../investment_multi_stage/">Investment multi stage</a></li><li><a class="tocitem" href="../dual_dynamic_programming/">Dual Dynamic Programming Algorithm</a></li></ul></li></ul></li><li><a class="tocitem" href="../policies/">Policies</a></li></ul></li><li><a class="tocitem" href="../methods/">Methods</a></li><li><a class="tocitem" href="../solver_configuration/">Solver Configurations</a></li><li><a class="tocitem" href="../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../additional_features/">Additional Features</a></li><li><a class="tocitem" href="../additional_third_party_extensions/">Third Party Extensions</a></li><li><a class="tocitem" href="../data_documentation/">Model Inputs/Outputs Documentation</a></li><li><a class="tocitem" href="../load_inputs/">GenX Inputs Functions</a></li><li><a class="tocitem" href="../write_outputs/">GenX Outputs Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Function Reference</a></li><li><a class="is-disabled">Resources</a></li><li><a class="is-disabled">Hydro</a></li><li class="is-active"><a href>Hydro Reservoir</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Hydro Reservoir</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenXProject/GenX/blob/main/docs/src/hydro_res.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Hydro-Resources"><a class="docs-heading-anchor" href="#Hydro-Resources">Hydro Resources</a><a id="Hydro-Resources-1"></a><a class="docs-heading-anchor-permalink" href="#Hydro-Resources" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="GenX.hydro_res!-Tuple{JuMP.Model, Dict, Dict}" href="#GenX.hydro_res!-Tuple{JuMP.Model, Dict, Dict}"><code>GenX.hydro_res!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">hydro_res!(EP::Model, inputs::Dict, setup::Dict)</code></pre><p>This module defines the operational constraints for reservoir hydropower plants. Hydroelectric generators with water storage reservoirs (<span>$y \in \mathcal{W}$</span>) are effectively modeled as energy storage devices that cannot charge from the grid and instead receive exogenous inflows to their storage reservoirs, reflecting stream flow inputs. For resources with unknown reservoir capacity (<span>$y \in \mathcal{W}^{nocap}$</span>), their operation is parametrized by their generation efficiency, <span>$\eta_{y,z}^{down}$</span>, and energy inflows to the reservoir at every time-step, represented as a fraction of the total power capacity,(<span>$\rho^{max}_{y,z,t}$</span>).  In case reservoir capacity is known (<span>$y \in \mathcal{W}^{cap}$</span>), an additional parameter, <span>$\mu^{stor}_{y,z}$</span>, referring to the ratio of energy capacity to discharge power capacity, is used to define the available reservoir storage capacity. <strong>Storage inventory balance</strong> Reservoir hydro systems are governed by the storage inventory balance constraint given below. This constraint enforces that energy level of the reservoir resource <span>$y$</span> and zone <span>$z$</span> in time step <span>$t$</span> (<span>$\Gamma_{y,z,t}$</span>) is defined as the sum of the reservoir level in the previous time step, less the amount of electricity generated, <span>$\Theta_{y,z,t}$</span> (accounting for the generation efficiency, <span>$\eta_{y,z}^{down}$</span>), minus any spillage <span>$\varrho_{y,z,t}$</span>, plus the hourly inflows into the reservoir (equal to the installed reservoir discharged capacity times the normalized hourly inflow parameter <span>$\rho^{max}_{y,z, t}$</span>).</p><p class="math-container">\[\begin{aligned}
&amp;\Gamma_{y,z,t} = \Gamma_{y,z,t-1} -\frac{1}{\eta_{y,z}^{down}}\Theta_{y,z,t} - \varrho_{y,z,t} + \rho^{max}_{y,z,t} \times \Delta^{total}_{y,z}  \hspace{.1 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}^{interior} \\
&amp;\Gamma_{y,z,t} = \Gamma_{y,z,t+\tau^{period}-1} -\frac{1}{\eta_{y,z}^{down}}\Theta_{y,z,t} - \varrho_{y,z,t} + \rho^{max}_{y,z,t} \times \Delta^{total}_{y,z}  \hspace{.1 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}^{start}
\end{aligned}\]</p><p>We implement time-wrapping to endogenize the definition of the intial state prior to the first period with the following assumption. If time step <span>$t$</span> is the first time step of the year then storage inventory at <span>$t$</span> is defined based on last time step of the year. Alternatively, if time step <span>$t$</span> is the first time step of a representative period, then storage inventory at <span>$t$</span> is defined based on the last time step of the representative period. Thus, when using representative periods, the storage balance constraint for hydro resources does not allow for energy exchange between representative periods. Note: in future updates, an option to model hydro resources with large reservoirs that can transfer energy across sample periods will be implemented, similar to the functions for modeling long duration energy storage in <code>long_duration_storage.jl</code>. <strong>Ramping Limits</strong> The following constraints enforce hourly changes in power output (ramps down and ramps up) to be less than the maximum ramp rates (<span>$\kappa^{down}_{y,z}$</span> and <span>$\kappa^{up}_{y,z}$</span> ) in per unit terms times the total installed capacity of technology y (<span>$\Delta^{total}_{y,z}$</span>).</p><p class="math-container">\[\begin{aligned}
&amp;\Theta_{y,z,t} - \Theta_{y,z,t-1} \leq \kappa^{up}_{y,z} \times \Delta^{total}_{y,z}
\hspace{2 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
&amp;\Theta_{y,z,t-1} - \Theta_{y,z,t} \leq \kappa^{down}_{y,z} \Delta^{total}_{y,z}
\hspace{2 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</p><p>Ramping constraints are enforced for all time steps except the first time step of the year or first time of each representative period when using representative periods to model grid operations. <strong>Power generation and stream flow bounds</strong> Electricity production plus total spilled power from hydro resources is constrained to always be above a minimum output parameter, <span>$\rho^{min}_{y,z}$</span>, to represent operational constraints related to minimum stream flows or other demands for water from hydro reservoirs. Electricity production is constrained by either the the net installed capacity or by the energy level in the reservoir in the prior time step, whichever is more binding. For the latter constraint, the constraint for the first time step of the year (or the first time step of each representative period) is implemented based on energy storage level in last time step of the year (or last time step of each representative period).</p><p class="math-container">\[\begin{aligned}
&amp;\Theta_{y,z,t} + \varrho_{y,z,t}  \geq \rho^{min}_{y,z} \times \Delta^{total}_{y,z}
\hspace{2 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
\Theta_{y,t}  \leq \times \Delta^{total}_{y,z}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t\in \mathcal{T}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
\Theta_{y,z,t} \leq  \Gamma_{y,t-1}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t\in \mathcal{T}
\end{aligned}\]</p><p><strong>Reservoir energy capacity constraint</strong> In case the reservoir capacity is known (<span>$y \in W^{cap}$</span>), then an additional constraint enforces the total stored energy in each time step to be less than or equal to the available reservoir capacity. Here, the reservoir capacity is defined multiplying the parameter, <span>$\mu^{stor}_{y,z}$</span> with the available power capacity.</p><p class="math-container">\[\begin{aligned}
\Gamma_{y,z, t} \leq \mu^{stor}_{y,z}\times \Delta^{total}_{y,z}
\hspace{4 cm}  \forall y \in \mathcal{W}^{cap}, z \in \mathcal{Z}, t\in \mathcal{T}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/73a0cf89dea1d71c898b48b8e375faafbfd81c9a/src/model/resources/hydro/hydro_res.jl#L17-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.hydro_res_reserves!-Tuple{JuMP.Model, Dict}" href="#GenX.hydro_res_reserves!-Tuple{JuMP.Model, Dict}"><code>GenX.hydro_res_reserves!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">hydro_res_reserves!(EP::Model, inputs::Dict)</code></pre><p>This module defines the modified constraints and additional constraints needed when modeling operating reserves <strong>Modifications when operating reserves are modeled</strong> When modeling operating reserves, the constraints regarding maximum power flow limits are modified to account for procuring some of the available capacity for frequency regulation (<span>$f_{y,z,t}$</span>) and &quot;updward&quot; operating (or spinning) reserves (<span>$r_{y,z,t}$</span>).</p><p class="math-container">\[\begin{aligned}
 \Theta_{y,z,t} + f_{y,z,t} +r_{y,z,t}  \leq  \times \Delta^{total}_{y,z}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t\in \mathcal{T}
\end{aligned}\]</p><p>The amount of downward frequency regulation reserves cannot exceed the current power output.</p><p class="math-container">\[\begin{aligned}
 f_{y,z,t} \leq \Theta_{y,z,t}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</p><p>The amount of frequency regulation and operating reserves procured in each time step is bounded by the user-specified fraction (<span>$\upsilon^{reg}_{y,z}$</span>,<span>$\upsilon^{rsv}_{y,z}$</span>) of nameplate capacity for each reserve type, reflecting the maximum ramp rate for the hydro resource in whatever time interval defines the requisite response time for the regulation or reserve products (e.g., 5 mins or 15 mins or 30 mins). These response times differ by system operator and reserve product, and so the user should define these parameters in a self-consistent way for whatever system context they are modeling.</p><p class="math-container">\[\begin{aligned}
f_{y,z,t} \leq \upsilon^{reg}_{y,z} \times \Delta^{total}_{y,z}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T} \\
r_{y,z, t} \leq \upsilon^{rsv}_{y,z}\times \Delta^{total}_{y,z}
\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/73a0cf89dea1d71c898b48b8e375faafbfd81c9a/src/model/resources/hydro/hydro_res.jl#L165-L192">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../flexible_demand/">« Flexible Demand</a><a class="docs-footer-nextpage" href="../hydro_inter_period_linkage/">Long Duration Hydro »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 12 December 2022 20:54">Monday 12 December 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
