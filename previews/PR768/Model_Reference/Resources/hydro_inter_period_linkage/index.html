<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Long Duration Hydro · GenX.jl</title><meta name="title" content="Long Duration Hydro · GenX.jl"/><meta property="og:title" content="Long Duration Hydro · GenX.jl"/><meta property="twitter:title" content="Long Duration Hydro · GenX.jl"/><meta name="description" content="Documentation for GenX.jl."/><meta property="og:description" content="Documentation for GenX.jl."/><meta property="twitter:description" content="Documentation for GenX.jl."/><meta property="og:url" content="https://genxproject.github.io/GenX.jl/stable/Model_Reference/Resources/hydro_inter_period_linkage/"/><meta property="twitter:url" content="https://genxproject.github.io/GenX.jl/stable/Model_Reference/Resources/hydro_inter_period_linkage/"/><link rel="canonical" href="https://genxproject.github.io/GenX.jl/stable/Model_Reference/Resources/hydro_inter_period_linkage/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/genx_style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img class="docs-light-only" src="../../../assets/logo.svg" alt="GenX.jl logo"/><img class="docs-dark-only" src="../../../assets/logo-dark.svg" alt="GenX.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome Page</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">GenX: Introduction</a></li><li><a class="tocitem" href="../../../installation/">Installation Guide</a></li><li><a class="tocitem" href="../../../limitations_genx/">Limitation of GenX</a></li><li><a class="tocitem" href="../../../third_party_genx/">Third Party Extensions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Getting_Started/examples_casestudies/">Running GenX</a></li><li><a class="tocitem" href="../../../Getting_Started/commercial_solvers/">Commertial solvers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Tutorials/Tutorials_intro/">Tutorials Overview</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_1_configuring_settings/">Tutorial 1: Configuring Settings</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_2_network_visualization/">Tutorial 2: Network Visualization</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_3_K-means_time_domain_reduction/">Tutorial 3: K-Means and Time Domain Reduction</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_4_model_generation/">Tutorial 4: Model Generation</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_5_solve_model/">Tutorial 5: Solving the Model</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_6_solver_settings/">Tutorial 6: Solver Settings</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_7_setup/">Tutorial 7: Policy Constraints</a></li><li><a class="tocitem" href="../../../Tutorials/Tutorial_8_outputs/">Tutorial 8: Outputs</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../User_Guide/workflow/">Overall workflow</a></li><li><a class="tocitem" href="../../../User_Guide/model_configuration/">Model Configuration</a></li><li><a class="tocitem" href="../../../User_Guide/solver_configuration/">Solver Configuration</a></li><li><a class="tocitem" href="../../../User_Guide/model_input/">Model Inputs</a></li><li><a class="tocitem" href="../../../User_Guide/TDR_input/">Time-domain Reduction Inputs</a></li><li><a class="tocitem" href="../../../User_Guide/running_TDR/">Running the Time-domain Reduction</a></li><li><a class="tocitem" href="../../../User_Guide/generate_alternatives/">MGA package</a></li><li><a class="tocitem" href="../../../User_Guide/multi_stage_input/">Multi-stage Model</a></li><li><a class="tocitem" href="../../../User_Guide/slack_variables_overview/">Slack Variables for Policies</a></li><li><a class="tocitem" href="../../../User_Guide/methodofmorris_input/">Method of Morris Inputs</a></li><li><a class="tocitem" href="../../../User_Guide/running_model/">Running the Model</a></li><li><a class="tocitem" href="../../../User_Guide/model_output/">Model Outputs</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Model Concept and Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Model_Concept_Overview/model_introduction/">Model Introduction</a></li><li><a class="tocitem" href="../../../Model_Concept_Overview/model_notation/">Notation</a></li><li><a class="tocitem" href="../../../Model_Concept_Overview/objective_function/">Objective Function</a></li><li><a class="tocitem" href="../../../Model_Concept_Overview/power_balance/">Power Balance</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">Model Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../core/">Core</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox" checked/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><input class="collapse-toggle" id="menuitem-6-2-3" type="checkbox" checked/><label class="tocitem" for="menuitem-6-2-3"><span class="docs-label">Hydro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../hydro_res/">Hydro Reservoir</a></li><li class="is-active"><a class="tocitem" href>Long Duration Hydro</a></li></ul></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li><a class="tocitem" href="../retrofit/">Retrofit</a></li><li><input class="collapse-toggle" id="menuitem-6-2-6" type="checkbox"/><label class="tocitem" for="menuitem-6-2-6"><span class="docs-label">Storage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../storage/">Storage</a></li><li><a class="tocitem" href="../investment_charge/">Investment Charge</a></li><li><a class="tocitem" href="../investment_energy/">Investment Energy</a></li><li><a class="tocitem" href="../long_duration_storage/">Long Duration Storage</a></li><li><a class="tocitem" href="../storage_all/">Storage All</a></li><li><a class="tocitem" href="../storage_asymmetric/">Storage Asymmetric</a></li><li><a class="tocitem" href="../storage_symmetric/">Storage Symmetric</a></li></ul></li><li><a class="tocitem" href="../vre_stor/">Co-located VRE and Storage</a></li><li><input class="collapse-toggle" id="menuitem-6-2-8" type="checkbox"/><label class="tocitem" for="menuitem-6-2-8"><span class="docs-label">Thermal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li><li><a class="tocitem" href="../maintenance/">Scheduled maintenance for Thermal Commit</a></li></ul></li><li><a class="tocitem" href="../electrolyzers/">Hydrogen Electrolyzers</a></li><li><a class="tocitem" href="../resource/">Resource types</a></li></ul></li><li><a class="tocitem" href="../../policies/">Policies</a></li><li><a class="tocitem" href="../../solver_configuration_api/">Solver Configurations</a></li><li><a class="tocitem" href="../../load_inputs/">Inputs Functions</a></li><li><a class="tocitem" href="../../generate_model/">Generate the Model</a></li><li><a class="tocitem" href="../../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../../TDR/">Time-domain Reduction</a></li><li><a class="tocitem" href="../../write_outputs/">Outputs Functions</a></li><li><a class="tocitem" href="../../mga/">Modeling to Generate Alternatives</a></li><li><input class="collapse-toggle" id="menuitem-6-11" type="checkbox"/><label class="tocitem" for="menuitem-6-11"><span class="docs-label">Multi-stage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Multi_Stage/multi_stage_overview/">Multi-Stage Modeling Introduction</a></li><li><a class="tocitem" href="../../Multi_Stage/configure_multi_stage_inputs/">Configure multi-stage inputs</a></li><li><a class="tocitem" href="../../Multi_Stage/dual_dynamic_programming/">Model multi stage: Dual Dynamic Programming Algorithm</a></li><li><a class="tocitem" href="../../Multi_Stage/endogenous_retirement/">Endogenous Retirement</a></li></ul></li><li><a class="tocitem" href="../../methodofmorris/">Method of Morris</a></li><li><a class="tocitem" href="../../utility_functions/">Utility Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Public API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Public_API/public_api/">Public API</a></li></ul></li><li><a class="tocitem" href="../../../additional_third_party_extensions/">Third Party Extensions</a></li><li><a class="tocitem" href="../../../developer_guide/">Developer Docs</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Reference</a></li><li><a class="is-disabled">Resources</a></li><li><a class="is-disabled">Hydro</a></li><li class="is-active"><a href>Long Duration Hydro</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Long Duration Hydro</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/GenXProject/GenX.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/GenXProject/GenX.jl/blob/main/docs/src/Model_Reference/Resources/hydro_inter_period_linkage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Reservoir-Hydro"><a class="docs-heading-anchor" href="#Reservoir-Hydro">Reservoir Hydro</a><a id="Reservoir-Hydro-1"></a><a class="docs-heading-anchor-permalink" href="#Reservoir-Hydro" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenX.hydro_inter_period_linkage!-Tuple{JuMP.Model, Dict}" href="#GenX.hydro_inter_period_linkage!-Tuple{JuMP.Model, Dict}"><code>GenX.hydro_inter_period_linkage!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hydro_inter_period_linkage!(EP::Model, inputs::Dict)</code></pre><p>This function creates variables and constraints enabling modeling of long duration storage resources when modeling representative time periods.</p><p><strong>Storage inventory balance at beginning of each representative period</strong> The constraints in this section are used to approximate the behavior of long-duration energy storage technologies when approximating annual grid operations by modeling operations over representative periods. Previously, the state of charge balance for storage (as defined in <code>storage_all()</code>) assumed that state of charge at the beginning and end of each representative period has to be the same. In other words, the amount of energy built up or consumed by storage technology <span>$o$</span> in zone <span>$z$</span> over the representative period <span>$m$</span>, <span>$\Delta Q_{o,z,m} = 0$</span>. This assumption implicitly excludes the possibility of transferring energy from one representative period to the other which could be cost-optimal when the capital cost of energy storage capacity is relatively small. To model long-duration energy storage using representative periods, we replace the state of charge equation, such that the first term on the right hand side accounts for change in storage inventory associated with representative period <span>$m$</span> (<span>$\Delta Q_{o,z,m}$</span>), which could be positive (net accumulation) or negative (net reduction).</p><p class="math-container">\[\begin{aligned}
&amp; \Gamma_{o,z,(m-1)\times \tau^{period}+1 } =\left(1-\eta_{o,z}^{loss}\right)\times \left(\Gamma_{o,z,m\times \tau^{period}} -\Delta Q_{o,z,m}\right) -  \\
&amp; \frac{1}{\eta_{o,z}^{discharge}}\Theta_{o,z,(m-1)\times \tau^{period}+1} + \eta_{o,z}^{charge}\Pi_{o,z,(m-1)\times \tau^{period}+1} \quad \forall o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, m \in \mathcal{M}
\end{aligned}\]</p><p>By definition <span>$\mathcal{T}^{start}=\{\left(m-1\right) \times \tau^{period}+1 | m \in \mathcal{M}\}$</span>, which implies that this constraint is defined for all values of <span>$t \in T^{start}$</span>.</p><p><strong>Storage inventory change input periods</strong> We need additional variables and constraints to approximate energy exchange between representative periods, while accounting for their chronological occurence in the original input time series data and the possibility that two representative periods may not be adjacent to each other (see Figure below). To implement this, we introduce a new variable <span>$Q_{o,z, n}$</span> that models inventory of storage technology <span>$o \in O$</span> in zone <span>$z$</span> in each input period <span>$n \in \mathcal{N}$</span>. Additionally we define a function mapping, <span>$f: n \rightarrow m$</span>, that uniquely maps each input period <span>$n$</span> to its corresponding representative period <span>$m$</span>. This mapping is available as an output of the process used to identify representative periods (E.g. k-means clustering <a href="https://www.sciencedirect.com/science/article/pii/S0360544218315238?casa_token=I-6GVNMtAVIAAAAA:G8LFXFqXxRGrXHtrzmiIGm02BusIUmm83zKh8xf1BXY81-dTnA9p2YI1NnGuzlYBXsxK12by">Mallapragada et al., 2018</a>). <img src="../../../assets/LDES_approach.png" alt="Modeling inter-period energy exchange via long-duration storage when using representative period temporal resolution to approximate annual grid operations"/> <em>Figure. Modeling inter-period energy exchange via long-duration storage when using representative period temporal resolution to approximate annual grid operations</em> The following two equations define the storage inventory at the beginning of each input period <span>$n+1$</span> as the sum of storage inventory at begining of previous input period <span>$n$</span> plus change in storage inventory for that period. The latter is approximated by the change in storage inventory in the corresponding representative period, identified per the mapping <span>$f(n)$</span>.  The second constraint relates the storage level of the last input period, <span>$|N|$</span>, with the storage level at the beginning of the first input period. Finally, if the input period is also a representative period, then a third constraint enforces that initial storage level estimated by the intra-period storage balance constraint should equal the initial storage level estimated from the inter-period storage balance constraints. Note that <span>$|N|$</span> refers to the last modeled period.</p><p class="math-container">\[\begin{aligned}
&amp; Q_{o,z,n+1} = Q_{o,z,n} + \Delta Q_{o,z,f(n)}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n \in \mathcal{N}\setminus\{|N|\}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
&amp; Q_{o,z,1} = Q_{o,z,|N|} + \Delta Q_{o,z,f(|N|)}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n = |N|
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
&amp; Q_{o,z,n} =\Gamma_{o,z,f(n)\times \tau^{period}} - \Delta Q_{o,z,m}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n \in   \mathcal{N}^{rep},
\end{aligned}\]</p><p>Finally, the next constraint enforces that the initial storage level for each input period <span>$n$</span> must be less than the installed energy capacity limit. This constraint ensures that installed energy storage capacity is consistent with the state of charge during both the operational time periods <span>$t$</span> during each sample period <span>$m$</span> as well as at the start of each chronologically ordered input period <span>$n$</span> in the full annual time series.</p><p class="math-container">\[\begin{aligned}
    Q_{o,z,n} \leq \Delta^{total, energy}_{o,z}
\quad \forall n \in \mathcal{N}, o \in \mathcal{O}^{LDES}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX.jl/blob/c4c63d0a669c2f41340b68aea8e09e0b42f598c5/src/model/resources/hydro/hydro_inter_period_linkage.jl#L1-L45">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../hydro_res/">« Hydro Reservoir</a><a class="docs-footer-nextpage" href="../must_run/">Must Run »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 6 September 2024 15:52">Friday 6 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
