<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configure multi-stage inputs · GenX</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://genxproject.github.io/GenX/stable/configure_multi_stage_inputs/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GenX</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Welcome Page</span><ul><li><a class="tocitem" href="../">GenX: Introduction</a></li><li><a class="tocitem" href="../how_to_run_genx/">Running GenX Cases</a></li><li><a class="tocitem" href="../multi_stage_genx/">Multi-Stage Capacity Expansion Planning with GenX</a></li><li><a class="tocitem" href="../limitations_genx/">Limitation of GenX</a></li><li><a class="tocitem" href="../third_party_genx/">Third Party Extensions</a></li></ul></li><li><span class="tocitem">Model Concept and Overview</span><ul><li><a class="tocitem" href="../model_introduction/">Model Introduction</a></li><li><a class="tocitem" href="../model_notation/">Notation</a></li><li><a class="tocitem" href="../objective_function/">Objective Function</a></li><li><a class="tocitem" href="../power_balance/">Power Balance</a></li></ul></li><li><span class="tocitem">Model Function Reference</span><ul><li><a class="tocitem" href="../core/">Core</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><input class="collapse-toggle" id="menuitem-3-2-3" type="checkbox"/><label class="tocitem" for="menuitem-3-2-3"><span class="docs-label">Hydro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../hydro_res/">Hydro Reservoir</a></li><li><a class="tocitem" href="../hydro_inter_period_linkage/">Long Duration Hydro</a></li></ul></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li><input class="collapse-toggle" id="menuitem-3-2-5" type="checkbox"/><label class="tocitem" for="menuitem-3-2-5"><span class="docs-label">Storage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../storage/">Storage</a></li><li><a class="tocitem" href="../investment_charge/">Investment Charge</a></li><li><a class="tocitem" href="../investment_energy/">Investment Energy</a></li><li><a class="tocitem" href="../long_duration_storage/">Long Duration Storage</a></li><li><a class="tocitem" href="../storage_all/">Storage All</a></li><li><a class="tocitem" href="../storage_asymmetric/">Storage Asymmetric</a></li><li><a class="tocitem" href="../storage_symmetric/">Storage Symmetric</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-6" type="checkbox"/><label class="tocitem" for="menuitem-3-2-6"><span class="docs-label">Thermal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Multi_stage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../multi_stage_model_overview/">Overview</a></li><li><input class="collapse-toggle" id="menuitem-3-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3-2"><span class="docs-label">Load inputs for multi-stage modeling</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Configure multi-stage inputs</a></li><li><a class="tocitem" href="../load_generators_data_multi_stage/">Load generators data</a></li><li><a class="tocitem" href="../load_network_data_multi_stage/">Load network data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3-3"><span class="docs-label">Model multi stage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../investment_multi_stage/">Investment multi stage</a></li><li><a class="tocitem" href="../dual_dynamic_programming/">Dual Dynamic Programming Algorithm</a></li></ul></li></ul></li><li><a class="tocitem" href="../policies/">Policies</a></li></ul></li><li><a class="tocitem" href="../methods/">Methods</a></li><li><a class="tocitem" href="../solver_configuration/">Solver Configurations</a></li><li><a class="tocitem" href="../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../additional_features/">Additional Features</a></li><li><a class="tocitem" href="../additional_third_party_extensions/">Third Party Extensions</a></li><li><a class="tocitem" href="../data_documentation/">Model Inputs/Outputs Documentation</a></li><li><a class="tocitem" href="../load_inputs/">GenX Inputs Functions</a></li><li><a class="tocitem" href="../write_outputs/">GenX Outputs Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Function Reference</a></li><li><a class="is-disabled">Multi_stage</a></li><li><a class="is-disabled">Load inputs for multi-stage modeling</a></li><li class="is-active"><a href>Configure multi-stage inputs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configure multi-stage inputs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenXProject/GenX/blob/main/docs/src/configure_multi_stage_inputs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="configure-multi-stage-inputs"><a class="docs-heading-anchor" href="#configure-multi-stage-inputs">configure multi stage inputs</a><a id="configure-multi-stage-inputs-1"></a><a class="docs-heading-anchor-permalink" href="#configure-multi-stage-inputs" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="GenX.compute_overnight_capital_cost-Tuple{Dict, Array, Array, Array}" href="#GenX.compute_overnight_capital_cost-Tuple{Dict, Array, Array, Array}"><code>GenX.compute_overnight_capital_cost</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function compute_overnight_capital_cost(settings_d::Dict,inv_costs_yr::Array,crp::Array,tech_wacc::Array)</code></pre><p>This function computes overnight capital costs incured within the model horizon, assuming that annualized costs to be paid after the model horizon are fully recoverable, and so are not included in the cost computation.</p><p>For each resource <span>$y \in \mathcal{G}$</span> with annualized investment cost <span>$AIC_{y}$</span> and capital recovery period <span>$CRP_{y}$</span>, overnight capital costs <span>$OCC_{y}$</span> are computed as follows:</p><p class="math-container">\[\begin{aligned}
    &amp; OCC_{y} = \sum^{min(CRP_{y},H)}_{i=1}\frac{AIC_{y}}{(1+WACC_{y})^{i}}
\end{aligned}\]</p><p>where <span>$WACC_y$</span> is the technology-specific weighted average cost of capital (set by the &quot;WACC&quot; field in the Generators_data.csv or Network.csv files), <span>$H$</span> is the number of years remaining between the start of the current model stage and the model horizon (the end of the final model stage) and <span>$CRP_y$</span> is the capital recovery period for technology <span>$y$</span> (specified in Generators_data.csv).</p><p>inputs:</p><ul><li>settings_d - dict object containing settings dictionary configured in the multi-stage settings file multi_stage_settings.yml.</li><li>inv_costs_yr - array object containing annualized investment costs.</li><li>crp - array object of capital recovery period values.</li><li>tech_wacc - array object containing technology-specific weighted costs of capital.</li></ul><p>NOTE: The inv_costs_yr and crp arrays must be the same length; values with the same index in each array correspond to the same resource <span>$y \in \mathcal{G}$</span>.</p><p>returns: array object containing overnight capital costs, the discounted sum of annual investment costs incured within the model horizon.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/a3731f60916caa982b6fe0562cdc709f2770bb46/src/multi_stage/configure_multi_stage_inputs.jl#L17-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.configure_multi_stage_inputs-Tuple{Dict, Dict, Int64}" href="#GenX.configure_multi_stage_inputs-Tuple{Dict, Dict, Int64}"><code>GenX.configure_multi_stage_inputs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function configure_multi_stage_inputs(inputs_d::Dict, settings_d::Dict, NetworkExpansion::Int64)</code></pre><p>This function overwrites input parameters read in via the load_inputs() method for proper configuration of multi-stage modeling:</p><ol><li><p>Overnight capital costs are computed via the compute_overnight_capital_cost() method and overwrite internal model representations of annualized investment costs.</p></li><li><p>Annualized fixed O&amp;M costs are scaled up to represent total fixed O&amp;M incured over the length of each model stage (specified by &quot;StageLength&quot; field in multi_stage_settings.yml).</p></li><li><p>Internal set representations of resources eligible for capacity retirements are overwritten to ensure compatability with multi-stage modeling.</p></li><li><p>When NetworkExpansion is active and there are multiple model zones, parameters related to transmission and network expansion are updated. First, annualized transmission reinforcement costs are converted into overnight capital costs. Next, the maximum allowable transmission line reinforcement parameter is overwritten by the model stage-specific value specified in the &quot;Line_Max_Flow_Possible_MW&quot; fields in the network_multi_stage.csv file. Finally, internal representations of lines eligible or not eligible for transmission expansion are overwritten based on the updated maximum allowable transmission line reinforcement parameters.</p></li></ol><p>inputs:</p><ul><li>inputs_d - dict object containing model inputs dictionary generated by load_inputs().</li><li>settings_d - dict object containing settings dictionary configured in the multi-stage settings file multi_stage_settings.yml.</li><li>NetworkExpansion - integer flag (0/1) indicating whether network expansion is on, set via the &quot;NetworkExpansion&quot; field in genx_settings.yml.</li></ul><p>returns: dictionary containing updated model inputs, to be used in the generate_model() method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/a3731f60916caa982b6fe0562cdc709f2770bb46/src/multi_stage/configure_multi_stage_inputs.jl#L65-L85">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../multi_stage_model_overview/">« Overview</a><a class="docs-footer-nextpage" href="../load_generators_data_multi_stage/">Load generators data »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 8 November 2022 20:45">Tuesday 8 November 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
